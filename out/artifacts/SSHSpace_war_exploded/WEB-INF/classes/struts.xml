<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
<!--	package是struts管理模块的单元，name必须有，方便继承，方便管理，可自定义namespace为访问路径前缀，默认是/-->
<!--	extends继承-->
	<package name="hello" extends="struts-default">
<!--		<interceptors>-->
<!--			<interceptor name="login" class="com.alex.interceptor.LoginInterceptor"/>-->
<!--		</interceptors>-->
<!--		访问路径-->
		<action name="hello">
			<result>/WEB-INF/jsp/login.jsp</result>
		</action>
		<action name="registerPage">
			<result>/WEB-INF/jsp/register.jsp</result>
		</action>
		<action name="list">
			<result>/WEB-INF/jsp/list.jsp</result>
		</action>
		<action name="update">
			<result>/WEB-INF/jsp/userinfo.jsp</result>
		</action>
		<action name="success">
<!--			<interceptor-ref name="login"/>-->
<!--			<result name="login">-->
<!--				<param name="actionName">error_loginForward</param>-->
<!--				<param name="namespace">/error</param>-->
<!--			</result>-->
			<result>/WEB-INF/jsp/success.jsp</result>
		</action>
	</package>
	<package name="user" extends="struts-default" namespace="/user">

		<action name="login" class="com.alex.action.UserAction" method="login">
			<result name="success">/WEB-INF/jsp/success.jsp</result>
			<result name="fail">/WEB-INF/jsp/login.jsp</result>
		</action>
		<action name="register" class="com.alex.action.UserAction" method="register">
			<result name="success">/WEB-INF/jsp/success.jsp</result>
			<result name="fail">/WEB-INF/jsp/register.jsp</result>
		</action>
		<action name="findAllForward" class="com.alex.action.UserAction" method="findAll">
			<result name="success">/WEB-INF/jsp/list.jsp</result>
		</action>
		<action name="findAll" class="com.alex.action.UserAction" method="findAll">
<!--			<result name="success" type="redirectAction">findAllForward</result>-->
			<result name="success">/WEB-INF/jsp/list.jsp</result>
		</action>
		<action name="find" class="com.alex.action.UserAction" method="find">
			<result name="success">/WEB-INF/jsp/list.jsp</result>
		</action>
		<action name="logout" class="com.alex.action.UserAction" method="logout">
			<result name="success">/WEB-INF/jsp/login.jsp</result>
		</action>
		<action name="delete" class="com.alex.action.UserAction" method="delete">
			<result name="success" type="redirectAction">findAll</result>
			<result name="fail">/WEB-INF/jsp/error.jsp</result>
		</action>
<!--		<action name="delete" class="com.alex.action.InfoAction" method="delete">-->
<!--			<result name="success">/WEB-INF/jsp/login.jsp</result>-->
<!--			<result name="fail">/WEB-INF/jsp/error.jsp</result>-->
<!--		</action>-->
		<action name="update" class="com.alex.action.UserAction" method="update">
			<result name="success" type="redirectAction">findAll</result>
			<result name="fail">/WEB-INF/jsp/error.jsp</result>
		</action>
		<action name="updateForward" class="com.alex.action.UserAction" method="updateForward">
			<result name="success">/WEB-INF/jsp/userinfo.jsp</result>
		</action>
	</package>
	<package name="demo" extends="struts-default" namespace="/demo">
		<interceptors>
			<interceptor name="timeInterceptor" class="com.alex.interceptor.TimeInterceptor"/>
			<interceptor name="loginInterceptor" class="com.alex.interceptor.LoginInterceptor"/>
		</interceptors>
		<global-results>
			<result name="success">/WEB-INF/jsp/error.jsp</result>
		</global-results>
		<action name="demo_*" class="com.alex.action.DemoAction" method="{1}">
			<interceptor-ref name="timeInterceptor"/>
			<interceptor-ref name="loginInterceptor"/>
			<result name="time" type="redirectAction">
				<param name="actionName">error_time</param>
				<param name="namespace">/error</param>
			</result>
			<result name="login" type="redirectAction">
				<param name="actionName">error_login</param>
				<param name="namespace">/error</param>
			</result>
		</action>
	</package>
	<package name="error" extends="struts-default" namespace="/error">
		<global-results>
			<result name="time">/WEB-INF/jsp/login.jsp</result>
			<result name="login">/WEB-INF/jsp/login.jsp</result>
		</global-results>
		<action name="error_*" class="com.alex.action.ErrorAction" method="{1}">
<!--			<result name="time" type="redirectAction">-->
<!--				<param name="actionName">hello</param>-->
<!--				<param name="namespace">/hello</param>-->
<!--			</result>-->
<!--			<result name="login" type="redirectAction">-->
<!--				<param name="actionName">hello</param>-->
<!--				<param name="namespace">/hello</param>-->
<!--			</result>-->
		</action>
	</package>
</struts>